
#installation services

$script1 = <<-SCRIPT
apt-get update -y
apt-get install -y ansible-core
SCRIPT



$script3 = <<-SCRIPT 
sudo apt-get update -y
sudo apt-get install apache2 -y
SCRIPT
#spécification de la box (image) pour créer la vm
Vagrant.configure("2") do |config|
  # Common configuration
  config.vm.box = "hashicorp-education/ubuntu-24-04"
  config.vm.box_version = "0.1.0"
  config.vm.network "forwarded_port", guest: 80, host: 8080

#installer Docker 
  config.vm.provision "shell", name: "install-docker", path: "install-docker.sh"

 config.vm.provision "shell", inline: $script1


#installer Apache
  config.vm.provision "shell", inline: $script3

#execution de playbook.yml
  #copie dans la vm
  config.vm.provision "shell", inline: "ansible-playbook -i localhost, playbook.yaml"

end







