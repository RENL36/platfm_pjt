#comment faire en sorte qu'un conteneur appartienne à un client ? n° port
#situation : 1 client fait une demande au giver - le giver lui envoie un numéro de port via lequel il #pourra accéder à l'application d'un conteneur
#installation services

$script1 = <<-SCRIPT
apt-get update -y
apt-get install -y ansible-core apache2 php libapache2-mod-php mysql-server
sudo systemctl enable mysql
SCRIPT




#spécification de la box (image) pour créer la vm
Vagrant.configure("2") do |config|
  # Common configuration
  config.vm.box = "hashicorp-education/ubuntu-24-04"
  config.vm.box_version = "0.1.0"
  config.vm.network "forwarded_port", guest: 80, host: 8080

#installer Docker 
  config.vm.provision "shell", name: "install-docker", path: "install-docker.sh"

#installer Ansible -> ne marche pas 
 config.vm.provision "shell", inline: $script1

config.vm.provision "shell", name: "init_mysql", path: "init_mysql.sh"

#execution de playbook.yml
  #config.vm.provision "shell", inline: "ansible-playbook -i localhost, playbook.yaml"

end







